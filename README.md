# 💡 Whisper 快閃筆記

**AI 驅動的語音靈感記錄應用**

使用最新的 whisper.cpp 實現**毫秒級**語音轉文字，專為快速記錄和管理靈感而設計。完全離線運行，保護隱私。

## ✨ 主要特色

### 🧠 快閃筆記系統
- **💡 靈感捕捉**：一鍵錄音，自動轉為文字筆記
- **⭐ 重要性標記**：標記重要想法，快速篩選
- **📱 本地存儲**：所有筆記安全存儲在設備本地
- **🔍 詳細查看**：點擊筆記查看完整內容和創建時間

### 🚀 極致性能
- **⚡ 毫秒級轉錄**：3秒音頻僅需1秒處理時間
- **🎯 智能模型**：Tiny 模型（快速）/ Base 模型（準確）動態切換
- **🔥 實時體驗**：錄音完成自動轉錄，無縫流程

### 🌍 語言支援
- **🇨🇳 中文優化**：針對中文語音識別調優
- **🌐 多語言**：支援 whisper.cpp 的所有語言
- **🔄 自動檢測**：智能語言識別

### 🔒 隱私安全
- **📱 完全離線**：所有處理在本地進行
- **🚫 無網路需求**：不上傳任何音頻或文字數據
- **🔐 數據安全**：筆記僅存儲在設備本地

### 🎨 現代化設計
- **📱 響應式布局**：適配各種屏幕尺寸
- **🎯 統一界面**：所有功能整合在單一頁面
- **⚡ 流暢動畫**：現代化 Material Design 3

## 🏆 性能表現

### 實測結果（Pixel 8 Pro）
```
音頻時長: 3.12秒
轉錄耗時: 1.02秒
處理速度: 3.06x 實時
準確率: 高（中文語音）
存儲方式: 本地 SharedPreferences
```

### 模型對比
| 模型 | 大小 | 速度 | 準確度 | 適用場景 |
|------|------|------|--------|----------|
| Tiny | 31MB | ⚡⚡⚡ | ⭐⭐⭐ | 快速記錄 |
| Base | 57MB | ⚡⚡ | ⭐⭐⭐⭐ | 重要內容 |

## 🚀 快速開始

### 環境要求
- **Flutter**: 3.0+
- **Android**: API 23+ (Android 6.0+)
- **NDK**: 27.0.12077973
- **設備**: ARM64 或 ARMv7 處理器

### 安裝步驟

1. **克隆專案**
```bash
git clone https://github.com/yourusername/whisper_voice_notes.git
cd whisper_voice_notes
```

2. **初始化子模組**
```bash
git submodule update --init --recursive
```

3. **安裝依賴**
```bash
flutter pub get
```

4. **構建並運行**
```bash
# Debug 版本（開發用）
flutter run

# Release 版本（最佳性能） - 推薦！
flutter build apk --release
flutter install --release
```

### 🎯 使用說明

#### 基本流程
1. **選擇模型**: 右上角選擇 Tiny（快）或 Base（準確）
2. **錄製想法**: 點擊「錄製想法」按鈕開始錄音
3. **自動轉錄**: 停止錄音後自動轉為文字筆記
4. **管理筆記**: 查看、編輯、刪除、標記重要性

#### 快閃筆記功能
- **📝 查看詳情**: 點擊筆記查看完整內容
- **✏️ 編輯筆記**: 點擊編輯圖標修改內容
- **⭐ 重要標記**: 在詳情頁面標記/取消重要性
- **🗑️ 刪除筆記**: 點擊刪除圖標移除筆記
- **📋 複製內容**: 在詳情頁面複製筆記到剪貼簿

#### 進階功能
- **🔄 模型切換**: 實時切換不同性能的模型
- **📱 響應式界面**: 自動適配不同屏幕尺寸
- **💾 自動保存**: 所有筆記自動本地保存

## 📁 專案結構

```
whisper_voice_notes/
├── lib/                          # Flutter 應用程式碼
│   ├── main.dart                 # 應用入口
│   └── pages/
│       └── home_page.dart        # 統一主頁面（快閃筆記）
├── android/
│   └── app/src/main/
│       ├── cpp/                  # C++ Native 程式碼
│       │   ├── CMakeLists.txt    # 構建配置
│       │   └── native-lib.cpp    # JNI 接口實現
│       └── kotlin/               # Android Kotlin 程式碼
│           └── MainActivity.kt   # 主 Activity
├── assets/models/                # Whisper 模型檔案
│   ├── ggml-tiny-q5_1.bin       # Tiny 模型（31MB，預設）
│   └── ggml-base-q5_1.bin       # Base 模型（57MB）
└── third_party/whisper.cpp/     # Whisper.cpp 子模組
```

## 🔧 技術架構

### 核心特色
- **統一頁面設計**: 所有功能整合在單一主頁面
- **智能狀態管理**: 響應式 UI 狀態同步
- **本地數據持久化**: SharedPreferences 安全存儲
- **模塊化代碼結構**: 清晰的功能分離和常量管理

### 主要組件
```dart
// 統一的快閃筆記管理
class HomePage extends StatefulWidget {
  // 錄音功能
  // 轉錄功能  
  // 筆記管理
  // 重要性標記
  // 模型選擇
}

// 筆記數據模型
class TranscriptionRecord {
  String id;              // 唯一標識
  String text;            // 筆記內容
  DateTime timestamp;     // 創建時間
  bool isImportant;       // 重要性標記
}

// 統一常量管理
class AppConstants {
  // UI 常量
  // 文字常量
  // 配置常量
}
```

### 智能優化
```cpp
// 自動選擇最佳 Native Library
if (CPU_supports_FP16) {
    load("whisper_v8fp16_va")  // ARM64 FP16 優化
} else if (CPU_supports_NEON) {
    load("whisper_vfpv4")      // ARMv7 NEON 優化
} else {
    load("whisper")            // 通用版本
}
```

## 📱 界面設計

### 主界面特色
- **🎙️ 錄音控制**: 醒目的錄音、停止、播放按鈕
- **📋 快閃筆記列表**: 流水號標識，支援重要標記
- **📄 詳細視圖**: 點擊查看完整筆記內容
- **⚙️ 模型選擇**: 右上角下拉選單動態切換

### 響應式設計
- **自適應高度**: 筆記列表根據屏幕大小調整
- **智能間距**: 條件性間距減少空間浪費
- **滾動支援**: 詳細內容支援滾動查看
- **SafeArea**: 避免系統UI遮擋

## 🛠️ 開發指南

### 代碼結構最佳實踐
```dart
// 功能模塊分離
// ============ 初始化方法 ============
// ============ 模型相關方法 ============  
// ============ 錄音相關方法 ============
// ============ 轉錄相關方法 ============
// ============ 筆記管理方法 ============
// ============ UI 相關方法 ============
// ============ 消息顯示方法 ============
// ============ UI 組件構建方法 ============
```

### 添加新功能
1. **數據模型**: 在 `TranscriptionRecord` 中添加新字段
2. **UI 組件**: 創建新的 `_build*()` 方法
3. **業務邏輯**: 在對應功能模塊中添加方法
4. **常量管理**: 在 `AppConstants` 中添加相關常量

### 性能優化建議
- **Release 構建**: 始終使用 Release 版本測試性能
- **模型選擇**: 根據使用場景選擇合適模型
- **本地存儲**: 合理使用 SharedPreferences 避免過度讀寫

## 📊 版本歷史

### v2.0.0 (2024-06-27) - 快閃筆記重構版本
- ✅ **核心重新定位**: 從語音轉錄工具變成快閃筆記應用
- ✅ **統一界面設計**: 整合所有功能到單一主頁面
- ✅ **本地存儲系統**: 實現筆記的持久化保存
- ✅ **重要性標記**: 支援筆記重要性管理
- ✅ **動態模型切換**: 實時切換 Tiny/Base 模型
- ✅ **響應式佈局**: 解決屏幕溢出，適配各種尺寸
- ✅ **代碼重構**: 模塊化架構，提升可維護性

### v1.0.0 (2024-06-26) - 性能突破版本
- ✅ 實現毫秒級轉錄性能
- ✅ 完整的中文語音識別支援
- ✅ 智能硬體優化和多版本編譯
- ✅ 現代化 Flutter UI 設計

## 🎯 未來發展

### 短期計劃 (v2.1.0)
- [ ] 筆記搜索功能
- [ ] 筆記分類標籤
- [ ] 批量操作（批量刪除、導出）
- [ ] 筆記同步備份

### 中期計劃 (v2.2.0)
- [ ] 語音備忘錄功能
- [ ] 筆記分享功能
- [ ] 主題切換（暗色模式）
- [ ] 多語言界面

### 長期規劃 (v3.0.0)
- [ ] AI 智能摘要
- [ ] 語音命令控制
- [ ] 跨平台同步（iOS、Web）
- [ ] 團隊協作功能

## 🤝 貢獻

歡迎提交 Issue 和 Pull Request！

### 開發環境設置
1. Fork 此專案
2. 創建功能分支: `git checkout -b feature/amazing-feature`
3. 提交變更: `git commit -m 'Add amazing feature'`
4. 推送分支: `git push origin feature/amazing-feature`
5. 提交 Pull Request

## 📄 授權

本專案採用 MIT 授權 - 詳見 [LICENSE](LICENSE) 文件

---

## 💡 設計理念

**「靈感稍縱即逝，用語音快速記錄你的想法！」**

這個應用專為那些需要快速記錄靈感、想法、會議要點的用戶而設計。通過 AI 語音識別技術，讓記錄變得自然而高效，讓每一個閃現的想法都不再錯失。